-- THIS FILE WAS AUTOMATICALLY GENERATED BY AENEAS
-- [defaulted_method]
import Aeneas
open Aeneas Aeneas.Std Result ControlFlow Error
set_option linter.dupNamespace false
set_option linter.hashCommand false
set_option linter.unusedVariables false

/- You can set the `maxHeartbeats` value with the `-max-heartbeats` CLI option -/
set_option maxHeartbeats 1000000

namespace defaulted_method

/- Trait declaration: [defaulted_method::Trait]
   Source: 'tests/src/defaulted_method.rs', lines 2:0-7:1 -/
structure Trait (Self : Type) where
  provided_method : Self → Result Std.U32
  required_method : Self → Result Std.U32

/- [defaulted_method::Trait::provided_method]:
   Source: 'tests/src/defaulted_method.rs', lines 3:4-5:5 -/
def Trait.provided_method.default
  {Self : Type} (TraitInst : Trait Self) (self : Self) : Result Std.U32 := do
  TraitInst.required_method self

/- [defaulted_method::NoOverride]
   Source: 'tests/src/defaulted_method.rs', lines 9:0-9:18 -/
@[reducible]
def NoOverride := Unit

/- [defaulted_method::{defaulted_method::Trait for defaulted_method::NoOverride}::required_method]:
   Source: 'tests/src/defaulted_method.rs', lines 14:4-16:5 -/
def NoOverride.Insts.Defaulted_methodTrait.required_method
  (self : NoOverride) : Result Std.U32 := do
  ok 12#u32

/- [defaulted_method::{defaulted_method::Trait for defaulted_method::NoOverride}::provided_method]:
   Source: 'tests/src/defaulted_method.rs', lines 11:4-13:5 -/
def NoOverride.Insts.Defaulted_methodTrait.provided_method
  (self : NoOverride) : Result Std.U32 := do
  ok 73#u32

/- Trait implementation: [defaulted_method::{defaulted_method::Trait for defaulted_method::NoOverride}]
   Source: 'tests/src/defaulted_method.rs', lines 10:0-17:1 -/
@[reducible]
def NoOverride.Insts.Defaulted_methodTrait : Trait NoOverride := {
  provided_method := NoOverride.Insts.Defaulted_methodTrait.provided_method
  required_method := NoOverride.Insts.Defaulted_methodTrait.required_method
}

/- [defaulted_method::YesOverride]
   Source: 'tests/src/defaulted_method.rs', lines 19:0-19:19 -/
@[reducible]
def YesOverride := Unit

/- [defaulted_method::{defaulted_method::Trait for defaulted_method::YesOverride}::required_method]:
   Source: 'tests/src/defaulted_method.rs', lines 21:4-23:5 -/
def YesOverride.Insts.Defaulted_methodTrait.required_method
  (self : YesOverride) : Result Std.U32 := do
  ok 42#u32

/- [defaulted_method::{defaulted_method::Trait for defaulted_method::YesOverride}::provided_method]:
   Source: 'tests/src/defaulted_method.rs', lines 20:0-24:1 -/
def YesOverride.Insts.Defaulted_methodTrait.provided_method
  (self : YesOverride) : Result Std.U32 := do
  YesOverride.Insts.Defaulted_methodTrait.required_method self

/- Trait implementation: [defaulted_method::{defaulted_method::Trait for defaulted_method::YesOverride}]
   Source: 'tests/src/defaulted_method.rs', lines 20:0-24:1 -/
@[reducible]
def YesOverride.Insts.Defaulted_methodTrait : Trait YesOverride := {
  provided_method := YesOverride.Insts.Defaulted_methodTrait.provided_method
  required_method := YesOverride.Insts.Defaulted_methodTrait.required_method
}

/- [defaulted_method::main]:
   Source: 'tests/src/defaulted_method.rs', lines 26:0-33:1 -/
def main : Result Unit := do
  let _ ← NoOverride.Insts.Defaulted_methodTrait.provided_method ()
  let _ ← YesOverride.Insts.Defaulted_methodTrait.provided_method ()
  let n ← lift (core.cmp.impls.OrdI32.min 10#i32 1#i32)
  massert (n = 1#i32)

end defaulted_method
