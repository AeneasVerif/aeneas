-- THIS FILE WAS AUTOMATICALLY GENERATED BY AENEAS
-- [joins]
import Aeneas
open Aeneas.Std Result Error
set_option linter.dupNamespace false
set_option linter.hashCommand false
set_option linter.unusedVariables false

namespace joins

/- [joins::opt_add_1]:
   Source: 'tests/src/joins.rs', lines 3:0-6:1 -/
def opt_add_1 (b : Bool) (x : U32) : Result U32 := do
  let y ← if b
            then ok 1#u32
            else ok 0#u32
  x + y

/- [joins::opt_add_2]:
   Source: 'tests/src/joins.rs', lines 8:0-12:1 -/
def opt_add_2 (b : Bool) (x : U32) : Result U32 := do
  let y ← if b
            then ok 1#u32
            else ok 0#u32
  let z ← if b
            then ok 1#u32
            else ok 0#u32
  let i ← x + y
  i + z

/- [joins::opt_add_1_or_panic]:
   Source: 'tests/src/joins.rs', lines 14:0-17:1 -/
def opt_add_1_or_panic (b : Bool) (x : U32) : Result U32 := do
  massert b
  x + 1#u32

/- [joins::opt_add_switch_1]:
   Source: 'tests/src/joins.rs', lines 19:0-26:1 -/
def opt_add_switch_1 (a : U32) (x : U32) : Result U32 := do
  let y ←
    match a with
    | 0#uscalar => ok 0#u32
    | 1#uscalar => ok 1#u32
    | _ => fail panic
  x + y

/- [joins::opt_add_switch_2]:
   Source: 'tests/src/joins.rs', lines 28:0-34:1 -/
def opt_add_switch_2 (a : U32) (x : U32) : Result U32 := do
  match a with
  | 0#uscalar => x + 0#u32
  | _ => fail panic

/- [joins::Enum]
   Source: 'tests/src/joins.rs', lines 36:0-40:1 -/
inductive Enum where
| V0 : Enum
| V1 : Enum
| V2 : Enum

/- [joins::use_enum]:
   Source: 'tests/src/joins.rs', lines 42:0-50:1 -/
def use_enum (e : Enum) (x : U32) : Result U32 := do
  let y ←
    match e with
    | Enum.V0 => ok 0#u32
    | Enum.V1 => ok 1#u32
    | Enum.V2 => ok 2#u32
  x + y

/- [joins::call_choose]:
   Source: 'tests/src/joins.rs', lines 52:0-55:1 -/
def call_choose (b : Bool) (x : U32) (y : U32) : Result (U32 × U32) := do
  let (z, back) ←
    if b
    then ok (x, fun i => (i, y))
    else ok (y, fun i => (x, i))
  let z1 ← z + 1#u32
  ok (back z1)

end joins
