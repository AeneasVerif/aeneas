-- THIS FILE WAS AUTOMATICALLY GENERATED BY AENEAS
-- [iterators_array]
import Aeneas
open Aeneas Aeneas.Std Result ControlFlow Error
set_option linter.dupNamespace false
set_option linter.hashCommand false
set_option linter.unusedVariables false

/- You can set the `maxHeartbeats` value with the `-max-heartbeats` CLI option -/
set_option maxHeartbeats 1000000

namespace iterators_array

/- [iterators_array::iter_array]: loop 0:
   Source: 'tests/src/iterators-array.rs', lines 6:4-8:5 -/
def iter_array_loop
  (x : Std.I32) (iter : alloc.vec.into_iter.IntoIter Std.U32) :
  Result Unit
  := do
  loop
    (fun (x1, iter1) =>
      do
      let (o, iter2) ← alloc.vec.into_iter.IteratorIntoIter.next iter1
      match o with
      | none => ok (done ())
      | some _ => let x2 ← x1 + 1#i32
                  ok (cont (x2, iter2)))
    (x, iter)

/- [iterators_array::iter_array]:
   Source: 'tests/src/iterators-array.rs', lines 3:0-9:1 -/
def iter_array : Result Unit := do
  let v ←
    alloc.vec.FromVecArray.from (Array.make 3#usize [ 1#u32, 2#u32, 3#u32 ])
  let iter ← alloc.vec.IntoIteratorVec.into_iter v
  iter_array_loop 0#i32 iter

end iterators_array
